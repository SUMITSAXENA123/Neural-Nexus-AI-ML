{% extends "base.html" %}

{% block content %}
<main class="dashboard-container">
    <!-- Header Section -->
    <section class="header-section mb-4">
        <div class="d-flex justify-content-between align-items-center">
            <h2 class="analysis-title">Analysis Report</h2>
            <div class="filter-summary">
                <span class="badge bg-primary me-2">{{ selected_country or 'All Countries' }}</span>
                <span class="badge bg-secondary">{{ selected_date_range or 'All Time' }}</span>
            </div>
        </div>
    </section>

    <!-- Back Button -->
    <div class="mb-4">
        <a href="/" class="btn btn-outline-primary">
            <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
        </a>
    </div>

    <!-- Analysis Grid -->
    <div class="analysis-grid">
        <!-- Row 1 -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Transaction Volume Over Time</h5>
                    <div id="line-chart" class="chart-container"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Transaction Amount Distribution</h5>
                    <div id="histogram" class="chart-container"></div>
                </div>
            </div>
        </div>

        <!-- Row 2 -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Fraud Detection Performance</h5>
                    <div id="roc-curve" class="chart-container"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Transaction Patterns</h5>
                    <div id="heatmap" class="chart-container"></div>
                </div>
            </div>
        </div>

        <!-- Row 3 -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Amount vs Time Scatter</h5>
                    <div id="scatter-plot" class="chart-container"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Transaction Amount Box Plot</h5>
                    <div id="box-plot" class="chart-container"></div>
                </div>
            </div>
        </div>

        <!-- Row 4 -->
        <div class="row">
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Cumulative Sum Analysis</h5>
                    <div id="cusum-chart" class="chart-container"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="analysis-card">
                    <h5 class="card-title">Transaction Categories</h5>
                    <div id="pie-chart" class="chart-container"></div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/analysis.js') }}"></script>
{% endblock %} 